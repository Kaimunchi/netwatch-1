!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("moment/moment")):"function"==typeof define&&define.amd?define(["exports","moment/moment"],e):e(t.d3=t.d3||{},t.moment)}(this,function(t,e){"use strict";function n(t){return t}function r(t,e){function r(t){return d3.max(t.nodes().map(function(t){return t.getComputedTextLength()}))}function a(t){return function(e){return e.length>t?e.slice(0,t-1)+"â€¦":e}}function i(i){var p=e.domain(),m=f(n),g=d3.scaleOrdinal(d),v=d3.scaleOrdinal(d.reverse()),x=a(s),y=i.selectAll(".row").data(p,e).order(),w=y.enter().append("g").attr("class","row"),b=y.exit(),A=y.select("text");y=y.merge(w).attr("transform",function(t){return"translate(0,"+e(t)+")"}),b.remove(),w.append("rect").attr("y",.5).attr("width",l).attr("height",e.bandwidth()).attr("stroke",c).attr("stroke-width",.75).attr("fill",g),w.append("path").attr("stroke",v),A=A.merge(w.append("text").attr("y",e.bandwidth()/2).attr("dy","0.32em").on("mouseover",function(t){d3.select(this).text()!=t&&m.show(t)}).on("mouseout",m.hide)).text(x);var k=r(A)+2*u;k=t===h?l-k:k,o=t===h?[0,k]:[k,l],A.attr("text-anchor",t===h?"start":"end").attr("dx",t===h?u:-u).attr("x",k),i.append("path").attr("stroke",c).attr("d","M"+(k+.5)+",0.5V"+e.range()[1])}var o,d=["#FFF","#EEE"],u=5,c="#AAA",s=40,l=100;return i.draw_ticks=function(t,n){t.selectAll(".row").select("path").attr("d",n.map(function(t){return"M"+t+",1v"+(e.bandwidth()-1)}).join(""))},i.scale=function(t){return arguments.length?(e=t,i):e},i.width=function(t){return arguments.length?(l=t,i):l},i.colors=function(t){return arguments.length?(d=t,i):d},i.padding=function(t){return arguments.length?(u=t,i):u},i.range=function(t){return arguments.length?(o=t,i):o},i.trim=function(t){return arguments.length?(s=t,i):s},i}function a(t){return r(m,t)}function i(t){return r(h,t)}function o(t,n){if(e)return e.duration(n-t).humanize();var r=d3.timeSecond.count(t,n);return r<120?r+"s":r<7200?d3.timeMinute.count(t,n)+" min":r<172800?d3.timeHour.count(t,n)+" hours":r<5184e3?d3.timeDay.count(t,n)+" day(s)":r<63072e3?d3.timeMonth.count(t,n)+" month(s)":d3.timeYear.count(t,n)+" year(s)"}function d(t){return function(e){return void 0===t?e:e[t]}}function u(t){var e=window.getComputedStyle(t,null).getPropertyValue("font-size");return parseFloat(e)}function c(t){return.299*t.r+.587*t.g+.114*t.b}function s(t){return c(t)>165}function l(t){return s(d3.color(t))?"black":"white"}function p(t,e){return"translate("+t+","+e+")"}e="default"in e?e.default:e;var f=function(t){d3.select("head").selectAll("#tooltip").data([1]).enter().append("style").attr("id","tooltip").text("div.tooltip {        position: absolute;        text-align: center;        padding: 5px;        /* font: 12px sans-serif; */        background: white;        border: 1px solid #AAA;        border-radius: 2px;        pointer-events: none;      }");var e=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);return e.show=function(){e.transition().duration(100).style("opacity",.95),e.html(t.apply(null,arguments)).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")},e.hide=function(t){e.transition().duration(100).style("opacity",0)},e},h=1,m=2;Function.prototype.wrap=function(t){var e=this;return function(){return t.call(this,e.apply(this,arguments))}},Function.prototype.compose=function(t){var e=this;return function(){return e.call(this,t.apply(this,arguments))}};var g=["#4285f4","#db4437","#f4b400","#0f9d58","#ab47bc","#5e97f5","#e06055","#f5bf26","#33ab71","#b762c6","#00acc1","#ff855f","#9e9d24","#26b8ca","#ff7043"],v=function(){function t(t,e){var n=d3.select(this.parentNode),r=n.select("text"),a=n.select("rect"),i=w(t),o=r.node().getComputedTextLength();d3.active(this).tween("text",function(){return function(t){var e=a.attr("width")-2*h,n=e/o;r.text(n<1?i.substring(0,Math.floor(i.length*n)):i)}})}function e(e){var o=e.datum(),d=d3.map(o,y).keys(),g=new f(n),k=d3.scaleOrdinal(s);r=r||[d3.min(o,b),d3.max(o,A)],e.each(function(n){var o=c||this.getBoundingClientRect().width,s=d.length*(u(this)+4*h),f=d3.scaleBand().domain(d).range([0,s]),F=d3.scaleTime().domain(r),M=(m?i:a)(f).width(o),C=d3.select(this).append("svg").attr("class","timeline");C.attr("width",o),C.attr("height",s+20);var O=C.append("g"),_=O.append("g").attr("class","y axis").call(M),j=M.range();F.range([j[0]+h,j[1]-h]).clamp(!0);var B=d3.axisBottom(F),E=O.append("g").attr("class","x axis").attr("transform",p(0,s)).call(B);E.select(".domain").remove(),E.selectAll(".tick line").attr("stroke","#AAA");var L=F.ticks().map(F);_.call(M.draw_ticks,L);var P=O.selectAll("g.task").data(n);P.exit().remove();var T=P.enter().append("g").classed("task",!0);T.append("rect").attr("y",h).attr("height",f.bandwidth()-2*h).on("mouseover",g.show).on("mouseout",g.hide).style("fill",w.wrap(k)),T.append("text").attr("text-anchor","start").attr("fill",function(t){return l(k(w(t)))}).attr("pointer-events","none").attr("dx",h).attr("y",f.bandwidth()/2).attr("dy","0.32em").text(w),P=P.merge(T),P.attr("transform",function(t){return p(j[0],f(y(t)))}).selectAll("rect").attr("width",0),P.transition().duration(x).attr("transform",function(t){return p(F(b(t)),f(y(t)))}).selectAll("rect").attr("width",function(t){return F(A(t))-F(b(t))}).on("start",t),v&&e.append("path").attr("stroke","red").attr("d","M"+F(new Date)+",0.5V"+s)})}function n(t,e){var n=d3.isoParse.wrap(d3.timeFormat("%Y-%m-%d"));return"<b>"+w(t)+'</b><hr style="margin: 2px 0 2px 0">'+n(b(t))+" - "+n(A(t))+"<br>"+o(b(t),A(t))}var r,c,s=g,h=5,m=!1,v=!1,x=0,y=d(0),w=d(1),b=d(2),A=d(3);return e.dates=function(t){return arguments.length?(r=t,e):r},e.width=function(t){return arguments.length?(c=t,e):c},e.today=function(t){return arguments.length?(v=t,e):v},e.colors=function(t){return arguments.length?(s=t,e):s},e.padding=function(t){return arguments.length?(h=t,e):h},e.reversed=function(t){return arguments.length?(m=t,e):m},e.duration=function(t){return arguments.length?(x=t,e):x},e};t.timeline=v,t.tooltip=f,t.timelineAxisLeft=a,t.timelineAxisRight=i,t.durationFormat=o,Object.defineProperty(t,"__esModule",{value:!0})});