$var page: Devices

<div class="modal fade" id="addDeviceDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add device</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="post">
        <div class="modal-body">
          <input type="hidden" name="action" value="add" />
          <div class="form-group">
            <label for="macAddress">Mac Address</label>
            <input type="text" class="form-control" id="macAddress" name="mac" placeholder="Enter Mac Address" required/>
          </div>
          <div class="form-group">
            <label for="customName">Custom name</label>
            <input type="text" class="form-control" id="customName" name="custom_name" placeholder="A custom name for the device"/>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" name="active_ping" aria-describedby="activePingHelp">
              Active ping
            </label>
            <small id="activePingHelp" class="form-text text-muted">Can send ping requests to verify device status.</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Add device</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteDeviceDialog" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete device</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="post">
        <div class="modal-body">
          <input type="hidden" name="action" value="delete" />
          <input type="hidden" id="macToDelete" name="mac" />
        
          Do you really want to delete device with mac "<span id="macToDeletePlaceholder"></span>"?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Delete</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <div id="toolbar">
     <button class="btn btn-secondary" data-toggle="modal" data-target="#addDeviceDialog">Add Device</button>
  </div>

  <table id="devices-table"></table>
</div>

<script>
  $$('#devices-table').bootstrapTable({
    toolbar: '#toolbar',
    iconsPrefix: 'fa',
    icons: {
      paginationSwitchDown: 'fa-collapse-down icon-chevron-down',
      paginationSwitchUp: 'fa-collapse-up icon-chevron-up',
      refresh: 'fa-refresh icon-refresh',
      toggle: 'fa-list-alt icon-list-alt',
      columns: 'fa-th icon-th',
      detailOpen: 'fa-plus icon-plus',
      detailClose: 'fa-minus icon-minus'
    },
    url: 'data/devices.json',
    search: true,
    columns: [{
      field: 'mac',
      title: 'Mac Address',
      sortable: true,
    }, {
      field: 'name',
      title: 'Custom Name',
      sortable: true,
    }, {
      field: 'active',
      title: 'Status',
      class: 'text-center',
      formatter: function(value, row, index) {
        return value ? `<span class="badge badge-success">Active</span>` : `<span class="badge badge-default">Offline</span>`;
      },
      sortable: true,
    }, {
      field: 'ip',
      title: 'Ip Address',
    }, {
      field: 'active_ping',
      title: 'Active Ping',
      class: 'text-center',
      formatter: function(value, row, index) {
        return value ? `<i class="fa fa-toggle-on"></i>` : `<i class="fa fa-toggle-off"></i>`;
      },
      sortable: true,
    }, {
      title: 'Actions',
      class: 'text-center',
      formatter: function(value, row, index) {
        return `<a href="#" class="btn btn-primary btn-sm"><i class="fa fa-pencil"></i></a>
        <a href="#deleteDeviceDialog" data-toggle="modal" data-target="#deleteDeviceDialog"
          class="btn btn-danger btn-sm"
          onclick="$$('#macToDeletePlaceholder').html('` + row.mac + `'); $$('#macToDelete').val('` + row.mac + `');">
          <i class="fa fa-trash"></i>
        </a>`;
      }
    } ]
  });
</script>
